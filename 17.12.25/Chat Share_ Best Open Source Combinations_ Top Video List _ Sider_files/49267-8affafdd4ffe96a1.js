!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1291668a-5e42-42aa-a18b-a02c3c8a4a29",e._sentryDebugIdIdentifier="sentry-dbid-1291668a-5e42-42aa-a18b-a02c3c8a4a29")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49267],{98094:function(e,t,r){var n,i,o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=t.LOG_TYPE=void 0;var u=r(88842),c={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};(n=i=t.LOG_TYPE||(t.LOG_TYPE={})).DEBUG="DEBUG",n.ERROR="ERROR",n.INFO="INFO",n.WARN="WARN",n.VERBOSE="VERBOSE",t.ConsoleLogger=function(){function e(e,t){void 0===t&&(t=i.WARN),this.name=e,this.level=t,this._pluggables=[]}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype.configure=function(e){return e&&(this._config=e),this._config},e.prototype._log=function(t){for(var r,n,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u=this.level;e.LOG_LEVEL&&(u=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(u=window.LOG_LEVEL);var l=c[u];if(c[t]>=l){var d=console.log.bind(console);t===i.ERROR&&console.error&&(d=console.error.bind(console)),t===i.WARN&&console.warn&&(d=console.warn.bind(console));var f="[".concat(t,"] ").concat(this._ts()," ").concat(this.name),h="";if(1===s.length&&"string"==typeof s[0])d(h="".concat(f," - ").concat(s[0]));else if(1===s.length)h="".concat(f," ").concat(s[0]),d(f,s[0]);else if("string"==typeof s[0]){var _=s.slice(1);1===_.length&&(_=_[0]),h="".concat(f," - ").concat(s[0]," ").concat(_),d("".concat(f," - ").concat(s[0]),_)}else h="".concat(f," ").concat(s),d(f,s);try{for(var p=o(this._pluggables),E=p.next();!E.done;E=p.next()){var g=E.value,v={message:h,timestamp:Date.now()};g.pushLogs([v])}}catch(e){r={error:e}}finally{try{E&&!E.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([i.INFO],s(e),!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([i.INFO],s(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([i.WARN],s(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([i.ERROR],s(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([i.DEBUG],s(e),!1))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([i.VERBOSE],s(e),!1))},e.prototype.addPluggable=function(e){e&&e.getCategoryName()===u.AWS_CLOUDWATCH_CATEGORY&&(this._pluggables.push(e),e.configure(this._config))},e.prototype.listPluggables=function(){return this._pluggables},e.LOG_LEVEL=null,e}()},44505:function(e,t,r){t.kK=void 0;var n=r(98094);Object.defineProperty(t,"kK",{enumerable:!0,get:function(){return n.LOG_TYPE}})},88842:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RETRY_ERROR_CODES=t.NO_CREDS_ERROR_STRING=t.AWS_CLOUDWATCH_PROVIDER_NAME=t.AWS_CLOUDWATCH_MAX_EVENT_SIZE=t.AWS_CLOUDWATCH_MAX_BATCH_EVENT_SIZE=t.AWS_CLOUDWATCH_CATEGORY=t.AWS_CLOUDWATCH_BASE_BUFFER_SIZE=void 0,t.AWS_CLOUDWATCH_BASE_BUFFER_SIZE=26,t.AWS_CLOUDWATCH_MAX_BATCH_EVENT_SIZE=1048576,t.AWS_CLOUDWATCH_MAX_EVENT_SIZE=256e3,t.AWS_CLOUDWATCH_CATEGORY="Logging",t.AWS_CLOUDWATCH_PROVIDER_NAME="AWSCloudWatch",t.NO_CREDS_ERROR_STRING="No credentials",t.RETRY_ERROR_CODES=["ResourceNotFoundException","InvalidSequenceTokenException"]},25862:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},98590:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},72565:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},7289:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},82850:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if("MSInputMethodContext"in e&&"msCrypto"in e&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,n=t.getRandomValues,i=t.subtle;return r.map(function(e){return i[e]}).concat(n).every(function(e){return"function"==typeof e})}return!1}},42158:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(39732);n.__exportStar(r(25862),t),n.__exportStar(r(98590),t),n.__exportStar(r(72565),t),n.__exportStar(r(7289),t),n.__exportStar(r(82850),t)},64761:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},71176:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var n=r(91818),i=r(95289),o=r(30633),s=r(37237),a=r(42158),u=r(93313),c=r(61064),l=function(){function e(e){(0,s.supportsWebCrypto)((0,u.locateWindow)())?this.hash=new i.Sha256(e):(0,a.isMsWindow)((0,u.locateWindow)())?this.hash=new n.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update((0,c.convertToBuffer)(e))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();t.Sha256=l},91818:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var n=r(24275),i=r(64761),o=r(37151),s=r(93313),a=function(){function e(e){this.secret=e,this.reset()}return e.prototype.update=function(e){var t=this;(0,n.isEmptyData)(e)||(this.operation=this.operation.then(function(r){return r.onerror=function(){t.operation=Promise.reject(Error("Error encountered updating hash"))},r.process(u(e)),r}),this.operation.catch(function(){}))},e.prototype.digest=function(){return this.operation.then(function(e){return new Promise(function(t,r){e.onerror=function(){r(Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),r(Error("Error encountered finalizing hash"))},e.finish()})})},e.prototype.reset=function(){var e;this.secret?(this.operation=(e=this.secret,new Promise(function(t,r){var n=(0,s.locateWindow)().msCrypto.subtle.importKey("raw",u(e),i.SHA_256_HMAC_ALGO,!1,["sign"]);n.oncomplete=function(){n.result&&t(n.result),r(Error("ImportKey completed without importing key."))},n.onerror=function(){r(Error("ImportKey failed to import key."))}})).then(function(e){return(0,s.locateWindow)().msCrypto.subtle.sign(i.SHA_256_HMAC_ALGO,e)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,s.locateWindow)().msCrypto.subtle.digest("SHA-256"))},e}();function u(e){return"string"==typeof e?(0,o.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},85279:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.WebCryptoSha256=t.Ie11Sha256=void 0,r(39732).__exportStar(r(71176),t);var n=r(91818);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return n.Sha256}});var i=r(95289);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return i.Sha256}})},24275:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},95289:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var n=r(61064),i=r(64761),o=r(93313),s=function(){function e(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return e.prototype.update=function(e){if(!(0,n.isEmptyData)(e)){var t=(0,n.convertToBuffer)(e),r=new Uint8Array(this.toHash.byteLength+t.byteLength);r.set(this.toHash,0),r.set(t,this.toHash.byteLength),this.toHash=r}},e.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return(0,o.locateWindow)().crypto.subtle.sign(i.SHA_256_HMAC_ALGO,t,e.toHash).then(function(e){return new Uint8Array(e)})}):(0,n.isEmptyData)(this.toHash)?Promise.resolve(i.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,o.locateWindow)().crypto.subtle.digest(i.SHA_256_HASH,e.toHash)}).then(function(e){return Promise.resolve(new Uint8Array(e))})},e.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise(function(t,r){(0,o.locateWindow)().crypto.subtle.importKey("raw",(0,n.convertToBuffer)(e.secret),i.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,r)}),this.key.catch(function(){}))},e}();t.Sha256=s},6566:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var n=r(4325),i=function(){function e(){this.state=Int32Array.from(n.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw Error("Attempted to update an already finished hash.");var t=0,r=e.byteLength;if(this.bytesHashed+=r,8*this.bytesHashed>n.MAX_HASHABLE_LENGTH)throw Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[t++],r--,this.bufferLength===n.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(t.setUint8(this.bufferLength++,128),r%n.BLOCK_SIZE>=n.BLOCK_SIZE-8){for(var i=this.bufferLength;i<n.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<n.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(n.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(n.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}for(var o=new Uint8Array(n.DIGEST_LENGTH),i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],d=0;d<n.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var f=this.temp[d-2],h=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,_=((f=this.temp[d-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(h+this.temp[d-7]|0)+(_+this.temp[d-16]|0)}var p=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(n.KEY[d]+this.temp[d]|0)|0)|0,E=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&o^i&o)|0;l=c,c=u,u=a,a=s+p|0,s=o,o=i,i=r,r=p+E|0}t[0]+=r,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},4325:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=9007199254740991},30633:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),r(39732).__exportStar(r(95424),t)},95424:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var n=r(39732),i=r(4325),o=r(6566),s=r(61064),a=function(){function e(e){this.secret=e,this.hash=new o.RawSha256,this.reset()}return e.prototype.update=function(e){if(!(0,s.isEmptyData)(e)&&!this.error)try{this.hash.update((0,s.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new o.RawSha256,this.secret){this.outer=new o.RawSha256;var e=function(e){var t=(0,s.convertToBuffer)(e);if(t.byteLength>i.BLOCK_SIZE){var r=new o.RawSha256;r.update(t),t=r.digest()}var n=new Uint8Array(i.BLOCK_SIZE);return n.set(t),n}(this.secret),t=new Uint8Array(i.BLOCK_SIZE);t.set(e);for(var r=0;r<i.BLOCK_SIZE;r++)e[r]^=54,t[r]^=92;this.hash.update(e),this.outer.update(t);for(var r=0;r<e.byteLength;r++)e[r]=0}},e}();t.Sha256=a},37237:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),r(39732).__exportStar(r(63344),t)},63344:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var n=r(39732),i=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function o(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function s(e){return e&&i.every(function(t){return"function"==typeof e[t]})}t.supportsWebCrypto=function(e){return!!o(e)&&"object"==typeof e.crypto.subtle&&s(e.crypto.subtle)},t.supportsSecureRandom=o,t.supportsSubtleCrypto=s,t.supportsZeroByteGCM=function(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(r){switch(r.label){case 0:if(!s(e))return[2,!1];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=r.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===r.sent().byteLength];case 4:return r.sent(),[2,!1];case 5:return[2]}})})}},54e3:function(e,t,r){var n=r(69602).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var i=r(37151),o=void 0!==n&&n.from?function(e){return n.from(e,"utf8")}:i.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?o(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}},61064:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var n=r(54e3);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return n.convertToBuffer}});var i=r(50209);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=r(54462);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=r(91384);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},50209:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},54462:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},91384:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}},93313:function(e,t,r){r.r(t),r.d(t,{locateWindow:function(){return i}});let n={};function i(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:n}},37151:function(e,t,r){r.r(t),r.d(t,{fromUtf8:function(){return o},toUtf8:function(){return s}});let n=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let n=e.charCodeAt(r);if(n<128)t.push(n);else if(n<2048)t.push(n>>6|192,63&n|128);else if(r+1<e.length&&(64512&n)==55296&&(64512&e.charCodeAt(r+1))==56320){let i=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(n>>12|224,n>>6&63|128,63&n|128)}return Uint8Array.from(t)},i=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let n=e[r];n<128?t+=String.fromCharCode(n):192<=n&&n<224?t+=String.fromCharCode((31&n)<<6|63&e[++r]):240<=n&&n<365?t+=decodeURIComponent("%"+[n,e[++r],e[++r],e[++r]].map(e=>e.toString(16)).join("%")):t+=String.fromCharCode((15&n)<<12|(63&e[++r])<<6|63&e[++r])}return t},o=e=>"function"==typeof TextEncoder?new TextEncoder().encode(e):n(e),s=e=>"function"==typeof TextDecoder?new TextDecoder("utf-8").decode(e):i(e)},23021:function(e,t,r){r.d(t,{xl:function(){return er},zv:function(){return i}});var n,i,o,s,a,u,c,l,d,f,h,_,p=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},E=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},g=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},v={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};(c=n||(n={})).DEBUG="DEBUG",c.ERROR="ERROR",c.INFO="INFO",c.WARN="WARN",c.VERBOSE="VERBOSE";var y=function(){function e(e,t){void 0===t&&(t=n.WARN),this.name=e,this.level=t,this._pluggables=[]}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype.configure=function(e){return e&&(this._config=e),this._config},e.prototype._log=function(t){for(var r,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];var a=this.level;e.LOG_LEVEL&&(a=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(a=window.LOG_LEVEL);var u=v[a];if(v[t]>=u){var c=console.log.bind(console);t===n.ERROR&&console.error&&(c=console.error.bind(console)),t===n.WARN&&console.warn&&(c=console.warn.bind(console));var l="[".concat(t,"] ").concat(this._ts()," ").concat(this.name),d="";if(1===o.length&&"string"==typeof o[0])c(d="".concat(l," - ").concat(o[0]));else if(1===o.length)d="".concat(l," ").concat(o[0]),c(l,o[0]);else if("string"==typeof o[0]){var f=o.slice(1);1===f.length&&(f=f[0]),d="".concat(l," - ").concat(o[0]," ").concat(f),c("".concat(l," - ").concat(o[0]),f)}else d="".concat(l," ").concat(o),c(l,o);try{for(var h=p(this._pluggables),_=h.next();!_.done;_=h.next()){var E=_.value,g={message:d,timestamp:Date.now()};E.pushLogs([g])}}catch(e){r={error:e}}finally{try{_&&!_.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,g([n.INFO],E(e),!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,g([n.INFO],E(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,g([n.WARN],E(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,g([n.ERROR],E(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,g([n.DEBUG],E(e),!1))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,g([n.VERBOSE],E(e),!1))},e.prototype.addPluggable=function(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))},e.prototype.listPluggables=function(){return this._pluggables},e.LOG_LEVEL=null,e}(),m=r(53088),S=r(61562),T=function(){function e(){}return e.Limit={MAX_EVENT_TYPE_LENGTH:50,MAX_NUM_OF_ATTRIBUTES:500,MAX_NUM_OF_USER_ATTRIBUTES:100,MAX_LENGTH_OF_NAME:50,MAX_LENGTH_OF_VALUE:1024,MAX_LENGTH_OF_USER_VALUE:256,MAX_EVENT_NUMBER_OF_BATCH:100,MAX_LENGTH_OF_ERROR_VALUE:256,MAX_NUM_OF_ITEMS:100,MAX_LENGTH_OF_ITEM_VALUE:256,MAX_NUM_OF_CUSTOM_ITEM_ATTRIBUTE:10},e.ErrorCode={NO_ERROR:0,EVENT_NAME_INVALID:1001,EVENT_NAME_LENGTH_EXCEED:1002,ATTRIBUTE_NAME_LENGTH_EXCEED:2001,ATTRIBUTE_NAME_INVALID:2002,ATTRIBUTE_VALUE_LENGTH_EXCEED:2003,ATTRIBUTE_SIZE_EXCEED:2004,USER_ATTRIBUTE_SIZE_EXCEED:3001,USER_ATTRIBUTE_NAME_LENGTH_EXCEED:3002,USER_ATTRIBUTE_NAME_INVALID:3003,USER_ATTRIBUTE_VALUE_LENGTH_EXCEED:3004,ITEM_SIZE_EXCEED:4001,ITEM_VALUE_LENGTH_EXCEED:4002,ITEM_CUSTOM_ATTRIBUTE_SIZE_EXCEED:4003,ITEM_CUSTOM_ATTRIBUTE_KEY_LENGTH_EXCEED:4004,ITEM_CUSTOM_ATTRIBUTE_KEY_INVALID:4005},e.ReservedAttribute={USER_ID:"_user_id",USER_FIRST_TOUCH_TIMESTAMP:"_user_first_touch_timestamp",ERROR_CODE:"_error_code",ERROR_MESSAGE:"_error_message",IS_FIRST_TIME:"_is_first_time",ENGAGEMENT_TIMESTAMP:"_engagement_time_msec",PAGE_URL:"_page_url",PAGE_TITLE:"_page_title",PAGE_REFERRER:"_page_referrer",PAGE_REFERRER_TITLE:"_page_referrer_title",LATEST_REFERRER:"_latest_referrer",LATEST_REFERRER_HOST:"_latest_referrer_host",PREVIOUS_TIMESTAMP:"_previous_timestamp",ENTRANCES:"_entrances",SESSION_ID:"_session_id",SESSION_DURATION:"_session_duration",SESSION_NUMBER:"_session_number",SESSION_START_TIMESTAMP:"_session_start_timestamp",LINK_CLASSES:"_link_classes",LINK_DOMAIN:"_link_domain",LINK_ID:"_link_id",LINK_URL:"_link_url",OUTBOUND:"_outbound",SEARCH_KEY:"_search_key",SEARCH_TERM:"_search_term",TIMING_ATTRIBUTES:["duration","deliveryType","nextHopProtocol","renderBlockingStatus","startTime","redirectStart","redirectEnd","workerStart","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","firstInterimResponseStart","responseStart","responseEnd","transferSize","encodedBodySize","decodedBodySize","responseStatus","unloadEventStart","unloadEventEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","type","redirectCount","activationStart","criticalCHRestart","serverTiming"]},e.PresetEvent={FIRST_OPEN:"_first_open",APP_START:"_app_start",APP_END:"_app_end",PROFILE_SET:"_profile_set",CLICKSTREAM_ERROR:"_clickstream_error",SESSION_START:"_session_start",USER_ENGAGEMENT:"_user_engagement",PAGE_VIEW:"_page_view",CLICK:"_click",SEARCH:"_search",SCROLL:"_scroll",PAGE_LOAD:"_page_load"},e.Constants={PREFIX:"[",SUFFIX:"]",LAST_EVENT_IDENTIFIER:'},{"event_type":',KEYWORDS:["q","s","search","query","keyword"]},e}(),I=new y("ClickstreamProvider"),A=function(){function e(){}return e.checkEventName=function(t){var r=T.ErrorCode,n=r.EVENT_NAME_INVALID,i=r.EVENT_NAME_LENGTH_EXCEED,o=r.NO_ERROR,s=T.Limit.MAX_EVENT_TYPE_LENGTH;return e.isValidName(t)?t.length>s?{error_code:i,error_message:"Event name is too long, the max event type length is "+"".concat(s," characters. event name: ").concat(t)}:{error_code:o}:{error_code:n,error_message:"Event name can only contains uppercase and lowercase letters, "+"underscores, number, and is not start with a number. event name: ".concat(t)}},e.isValidName=function(e){return/^(?![0-9])[0-9a-zA-Z_]+$/.test(e)},e.checkAttributes=function(t,r,n){var i,o,s=T.Limit,a=s.MAX_NUM_OF_ATTRIBUTES,u=s.MAX_LENGTH_OF_NAME,c=s.MAX_LENGTH_OF_VALUE,l=T.ErrorCode,d=l.NO_ERROR,f=l.ATTRIBUTE_SIZE_EXCEED,h=l.ATTRIBUTE_NAME_INVALID,_=l.ATTRIBUTE_NAME_LENGTH_EXCEED,p=l.ATTRIBUTE_VALUE_LENGTH_EXCEED;if(t>=a){o="reached the max number of attributes limit ".concat(a,". ")+"and the attribute: ".concat(r," will not be recorded");var E="attribute name: ".concat(r);i={error_message:e.getLimitString(E),error_code:f}}else if(r.length>u){o="attribute : ".concat(r,", reached the max length of attributes name ")+"limit(".concat(u,"). current length is: (").concat(r.length,") ")+"and the attribute will not be recorded";var E="attribute name length is: (".concat(r.length,") name is: ").concat(r);i={error_message:e.getLimitString(E),error_code:_}}else if(e.isValidName(r)){if(String(n).length>c){o="attribute : ".concat(r,", reached the max length of attributes value limit ")+"(".concat(c,"). current length is: (").concat(String(n).length,"). ")+"and the attribute will not be recorded, attribute value: ".concat(n);var E="attribute name: ".concat(r,", attribute value: ").concat(n);i={error_message:e.getLimitString(E),error_code:p}}}else o="attribute : ".concat(r,", was not valid, attribute name can only ")+"contains uppercase and lowercase letters, underscores, number, and is not start with a number, so the attribute will not be recorded",i={error_message:e.getLimitString(r),error_code:h};return i?(I.warn(o),i):{error_code:d}},e.getLimitString=function(e){return e.substring(0,T.Limit.MAX_LENGTH_OF_ERROR_VALUE)},e.checkUserAttribute=function(t,r,n){var i,o,s=T.Limit,a=s.MAX_NUM_OF_USER_ATTRIBUTES,u=s.MAX_LENGTH_OF_NAME,c=s.MAX_LENGTH_OF_USER_VALUE,l=T.ErrorCode,d=l.NO_ERROR,f=l.USER_ATTRIBUTE_SIZE_EXCEED,h=l.USER_ATTRIBUTE_NAME_LENGTH_EXCEED,_=l.USER_ATTRIBUTE_NAME_INVALID,p=l.USER_ATTRIBUTE_VALUE_LENGTH_EXCEED;if(t>=a){o="reached the max number of user attributes limit (".concat(a,"). ")+"and the user attribute: ".concat(r," will not be recorded");var E="attribute name:".concat(r);i={error_message:e.getLimitString(E),error_code:f}}else if(r.length>u){o="user attribute : ".concat(r,", reached the max length of attributes name limit ")+"(".concat(u,"). current length is: (").concat(r.length,") ")+"and the attribute will not be recorded";var E="user attribute name length is: (".concat(r.length,") name is: ").concat(r);i={error_message:e.getLimitString(E),error_code:h}}else if(e.isValidName(r)){if(String(n).length>c){o="user attribute : ".concat(r,", reached the max length of attributes value limit ")+"(".concat(c,"). current length is: (").concat(String(n).length,"). ")+"and the attribute will not be recorded, attribute value: ".concat(n);var E="attribute name: ".concat(r,", attribute value: ").concat(n);i={error_message:e.getLimitString(E),error_code:p}}}else o="user attribute : ".concat(r,", was not valid, user attribute name can only ")+"contains uppercase and lowercase letters, underscores, number, and is not start with a number. so the attribute will not be recorded",i={error_message:e.getLimitString(r),error_code:_};return i?(I.warn(o),i):{error_code:d}},e.checkItems=function(t,r){void 0===e.itemKeySet&&e.initItemKeySet();var n,i,o,s,a=T.Limit,u=a.MAX_NUM_OF_ITEMS,c=a.MAX_LENGTH_OF_ITEM_VALUE,l=a.MAX_NUM_OF_CUSTOM_ITEM_ATTRIBUTE,d=a.MAX_LENGTH_OF_NAME,f=T.ErrorCode,h=f.NO_ERROR,_=f.ITEM_SIZE_EXCEED,p=f.ITEM_VALUE_LENGTH_EXCEED,E=f.ITEM_CUSTOM_ATTRIBUTE_SIZE_EXCEED,g=f.ITEM_CUSTOM_ATTRIBUTE_KEY_LENGTH_EXCEED,v=f.ITEM_CUSTOM_ATTRIBUTE_KEY_INVALID,y=JSON.stringify(r);if(t>=u){var S="reached the max number of items limit ".concat(u,". ")+"and the item: ".concat(y," will not be recorded");I.warn(S);var A="item: ".concat(y);return{error_message:e.getLimitString(A),error_code:_}}var b=0;try{for(var R=(0,m.__values)(Object.entries(r)),w=R.next();!w.done;w=R.next()){var U=(0,m.__read)(w.value,2),O=U[0],C=U[1],L=String(C);if(!e.itemKeySet.has(O)){if((b+=1)>l){o="reached the max number of custom item attributes limit (".concat(l)+"). and the item: ".concat(y," will not be recorded");var A="item attribute key: ".concat(O);s={error_message:e.getLimitString(A),error_code:E}}else if(O.length>T.Limit.MAX_LENGTH_OF_NAME){o="item attribute key: ".concat(O," , reached the max length of item attributes key limit(")+"".concat(d,"). current length is:(").concat(O.length,") and the item: ").concat(y," will not be recorded");var A="item attribute key: "+O;s={error_message:e.getLimitString(A),error_code:g}}else e.isValidName(O)||(o="item attribute key: ".concat(O,", was not valid, item attribute key can only contains")+" uppercase and lowercase letters, underscores, number, and is not start with a number."+" so the item: ".concat(y," will not be recorded"),s={error_message:e.getLimitString(O),error_code:v})}if(!s&&L.length>c){o="item attribute : ".concat(O,", reached the max length of item attribute value limit ")+"(".concat(c,"). current length is: (").concat(L.length,"). ")+"and the item: ".concat(y," will not be recorded");var A="item attribute name: ".concat(O,", item attribute value: ").concat(L);s={error_message:e.getLimitString(A),error_code:p}}if(s)return I.warn(o),s}}catch(e){n={error:e}}finally{try{w&&!w.done&&(i=R.return)&&i.call(R)}finally{if(n)throw n.error}}return{error_code:h}},e.initItemKeySet=function(){e.itemKeySet=new Set,e.itemKeySet.add("id"),e.itemKeySet.add("name"),e.itemKeySet.add("location_id"),e.itemKeySet.add("brand"),e.itemKeySet.add("currency"),e.itemKeySet.add("price"),e.itemKeySet.add("quantity"),e.itemKeySet.add("creative_name"),e.itemKeySet.add("creative_slot"),e.itemKeySet.add("category"),e.itemKeySet.add("category2"),e.itemKeySet.add("category3"),e.itemKeySet.add("category4"),e.itemKeySet.add("category5")},e}(),b=["getItem","setItem","key","removeItem","clear","length"];function R(){try{return"undefined"!=typeof localStorage&&null!==localStorage}catch(e){return!1}}var w=function(){function e(){}return e.prototype.getItem=function(t){try{if(R())return window.localStorage.getItem(t)}catch(e){console.error(e)}return e.storage[t]},e.prototype.setItem=function(t,r){try{if(R())return window.localStorage.setItem(t,r)}catch(n){e.storage[t]=r}},e.prototype.key=function(t){try{if(R())return window.localStorage.key(t)}catch(e){console.error(e)}var r=Object.keys(e.storage);return r.length>t&&t>=0?r[t]:null},e.prototype.removeItem=function(t){try{if(R())return window.localStorage.removeItem(t)}catch(e){console.error(e)}b.includes(t)||delete e.storage[t]},e.prototype.clear=function(){try{if(R())return window.localStorage.clear()}catch(e){console.error(e)}Object.keys(e.storage).filter(function(e){return!b.includes(e)}).forEach(function(t){delete e.storage[t]})},Object.defineProperty(e.prototype,"length",{get:function(){try{if(R())return window.localStorage.length}catch(e){console.error(e)}return Object.keys(e.storage).filter(function(e){return!b.includes(e)}).length},enumerable:!1,configurable:!0}),e.storage={getItem:function(e){return null},setItem:function(e,t){},key:function(e){return null},removeItem:function(e){},clear:function(){},length:0},e}(),U=new w;w.storage.getItem=U.getItem,w.storage.setItem=U.setItem,w.storage.removeItem=U.removeItem,w.storage.clear=U.clear,w.storage.key=U.key;var O=new Proxy(U,{set:function(e,t,r){return w.prototype.hasOwnProperty(t)||U.setItem(t,r),!0},get:function(e,t){return w.prototype.hasOwnProperty(t)?U[t]:U.getItem(t)}}),C=new y("BaseTracker"),L=function(){function e(e,t){this.provider=e,this.context=t}return e.prototype.setUp=function(){B.isBrowser()&&document.addEventListener&&window.addEventListener&&history.pushState?this.init():C.warn("not in the supported web environment")},e}();(l=i||(i={})).Immediate="Immediate",l.Batch="Batch",(d=o||(o={})).SPA="SPA",d.multiPageApp="multiPageApp",(f=s||(s={})).TRAFFIC_SOURCE_SOURCE="_traffic_source_source",f.TRAFFIC_SOURCE_MEDIUM="_traffic_source_medium",f.TRAFFIC_SOURCE_CAMPAIGN="_traffic_source_campaign",f.TRAFFIC_SOURCE_CAMPAIGN_ID="_traffic_source_campaign_id",f.TRAFFIC_SOURCE_TERM="_traffic_source_term",f.TRAFFIC_SOURCE_CONTENT="_traffic_source_content",f.TRAFFIC_SOURCE_CLID="_traffic_source_clid",f.TRAFFIC_SOURCE_CLID_PLATFORM="_traffic_source_clid_platform",f.VALUE="_value",f.CURRENCY="_currency";var P=function(){function e(e,t){this.context=e,this.methodName=t,this.originalMethod=e[t].bind(e)}return e.add=function(t,r,n){new e(t,r).set(n)},e.prototype.set=function(e){var t=this;this.context[this.methodName]=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e(t.originalMethod.apply(t,(0,m.__spreadArray)([],(0,m.__read)(r),!1)))}},e}(),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isEntrances=!1,t.searchKeywords=T.Constants.KEYWORDS,t.lastEngageTime=0,t.lastScreenStartTimestamp=0,t.isFirstTime=!0,t}return(0,m.__extends)(t,e),t.prototype.init=function(){t.lastActiveTimestamp=new Date().getTime(),t.idleTimeoutDuration=this.provider.configuration.idleTimeoutDuration;var e=this.provider.configuration.searchKeyWords;Object.assign(this.searchKeywords,e),this.onPageChange=this.onPageChange.bind(this),this.isMultiPageApp()?B.isFromReload()||this.onPageChange():this.trackPageViewForSPA(),this.isFirstTime=!1},t.prototype.trackPageViewForSPA=function(){P.add(history,"pushState",this.onPageChange),P.add(history,"replaceState",this.onPageChange),window.addEventListener("popstate",this.onPageChange),B.isFromReload()||this.onPageChange()},t.prototype.onPageChange=function(){var e;if(t.updateIdleDuration(),this.context.configuration.isTrackPageViewEvents){var r=K.getPreviousPageUrl(),n=K.getPreviousPageTitle(),i=B.getCurrentPageUrl(),o=B.getCurrentPageTitle();(this.isFirstTime||this.isMultiPageApp()||r!==i||n!==o)&&(null===(e=this.provider.scrollTracker)||void 0===e||e.enterNewPage(),this.isMultiPageApp()||this.isFirstTime||""===r||this.recordUserEngagement(),this.trackPageView(r,n),this.trackSearchEvents(),K.savePreviousPageUrl(i),K.savePreviousPageTitle(o))}},t.prototype.trackPageView=function(e,t){var r,n=K.getPreviousPageStartTime(),i=this.provider.createEvent({name:T.PresetEvent.PAGE_VIEW}),o=i.timestamp,s=((r={})[T.ReservedAttribute.PAGE_REFERRER]=e,r[T.ReservedAttribute.PAGE_REFERRER_TITLE]=t,r[T.ReservedAttribute.ENTRANCES]=this.isEntrances?1:0,r);n>0&&(s[T.ReservedAttribute.PREVIOUS_TIMESTAMP]=n),this.lastEngageTime>0&&(s[T.ReservedAttribute.ENGAGEMENT_TIMESTAMP]=this.lastEngageTime),Object.assign(i.attributes,s),this.provider.recordEvent(i),this.isEntrances=!1,K.savePreviousPageStartTime(o),this.lastScreenStartTimestamp=o},t.prototype.setIsEntrances=function(){this.isEntrances=!0},t.prototype.updateLastScreenStartTimestamp=function(){this.lastScreenStartTimestamp=new Date().getTime(),t.idleDuration=0,t.lastActiveTimestamp=this.lastScreenStartTimestamp},t.prototype.recordUserEngagement=function(e){var t;void 0===e&&(e=!1),this.lastEngageTime=this.getLastEngageTime(),this.provider.configuration.isTrackUserEngagementEvents&&this.lastEngageTime>a.minEngagementTime&&this.provider.record({name:T.PresetEvent.USER_ENGAGEMENT,attributes:((t={})[T.ReservedAttribute.ENGAGEMENT_TIMESTAMP]=this.lastEngageTime,t),isImmediate:e})},t.prototype.getLastEngageTime=function(){var e=new Date().getTime()-this.lastScreenStartTimestamp-t.idleDuration;return t.idleDuration=0,e},t.prototype.isMultiPageApp=function(){return this.context.configuration.pageType===o.multiPageApp},t.prototype.trackSearchEvents=function(){if(this.context.configuration.isTrackSearchEvents){var e,t,r,n=window.location.search;if(n&&0!==n.length){var i=new URLSearchParams(n);try{for(var o=(0,m.__values)(this.searchKeywords),s=o.next();!s.done;s=o.next()){var a=s.value;if(i.has(a)){var u=i.get(a);this.provider.record({name:T.PresetEvent.SEARCH,attributes:((r={})[T.ReservedAttribute.SEARCH_KEY]=a,r[T.ReservedAttribute.SEARCH_TERM]=u,r)});break}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}}},t.updateIdleDuration=function(){var e=new Date().getTime(),r=e-t.lastActiveTimestamp;r>t.idleTimeoutDuration&&(t.idleDuration+=r),t.lastActiveTimestamp=e},t.lastActiveTimestamp=0,t.idleDuration=0,t.idleTimeoutDuration=0,t}(L);(h=a||(a={}))[h.minEngagementTime=1e3]="minEngagementTime";var N=function(){function e(e,t,r,n){void 0===n&&(n=void 0),this.isRecorded=!1,this.sessionId=e,this.sessionIndex=t,this.startTime=r,this.pauseTime=n}return e.createSession=function(t,r){return new e(this.getSessionId(t),r,new Date().getTime())},e.prototype.isNewSession=function(){return void 0===this.pauseTime&&!this.isRecorded},e.prototype.getDuration=function(){return new Date().getTime()-this.startTime},e.prototype.pause=function(){this.pauseTime=new Date().getTime()},e.getCurrentSession=function(t,r){void 0===r&&(r=null);var n=r;return(null===r&&(n=K.getSession()),null===n)?e.createSession(t.userUniqueId,1):void 0===n.pauseTime||new Date().getTime()-n.pauseTime<t.configuration.sessionTimeoutDuration?n:e.createSession(t.userUniqueId,n.sessionIndex+1)},e.getSessionId=function(e){var t=e.slice(-u.maxUniqueIdLength);return"".concat(t,"-").concat(this.getFormatTime())},e.getFormatTime=function(){var e=new Date,t=e.getUTCFullYear().toString().padStart(4,"0"),r=(e.getUTCMonth()+1).toString().padStart(2,"0"),n=e.getUTCDate().toString().padStart(2,"0"),i=e.getUTCHours().toString().padStart(2,"0"),o=e.getUTCMinutes().toString().padStart(2,"0"),s=e.getUTCSeconds().toString().padStart(2,"0"),a=e.getUTCMilliseconds().toString().padStart(3,"0");return"".concat(t).concat(r).concat(n,"-").concat(i).concat(o).concat(s).concat(a)},e}();(_=u||(u={}))[_.maxUniqueIdLength=8]="maxUniqueIdLength";var k=new y("SessionTracker"),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isWindowClosing=!1,t}return(0,m.__extends)(t,e),t.prototype.init=function(){this.onVisibilityChange=this.onVisibilityChange.bind(this),this.onBeforeUnload=this.onBeforeUnload.bind(this),this.handleInit(),this.checkEnv()?(document.addEventListener(this.visibilityChange,this.onVisibilityChange,!1),window.addEventListener("beforeunload",this.onBeforeUnload,!1)):k.warn("not supported env")},t.prototype.onVisibilityChange=function(){document.visibilityState===this.hiddenStr?this.onPageHide():this.onPageAppear()},t.prototype.handleInit=function(){this.session=N.getCurrentSession(this.context),K.getIsFirstOpen()&&(this.provider.record({name:T.PresetEvent.FIRST_OPEN}),K.saveIsFirstOpenToFalse()),this.onPageAppear(!0)},t.prototype.onPageAppear=function(e){void 0===e&&(e=!1),k.debug("page appear");var t,r=this.provider.pageViewTracker;r.updateLastScreenStartTimestamp(),e||(this.session=N.getCurrentSession(this.context,this.session)),this.session.isNewSession()&&(r.setIsEntrances(),K.clearPageInfo(),this.provider.record({name:T.PresetEvent.SESSION_START}),this.session.isRecorded=!0,e||r.onPageChange()),!(!this.provider.configuration.isTrackAppStartEvents||e&&this.isFromCurrentHost())&&(e&&B.isFromReload()||this.provider.record({name:T.PresetEvent.APP_START,attributes:((t={})[T.ReservedAttribute.IS_FIRST_TIME]=e,t)}))},t.prototype.isFromCurrentHost=function(){return window.location.host===this.context.browserInfo.latestReferrerHost},t.prototype.onPageHide=function(){k.debug("page hide"),this.storeSession(),K.checkClickstreamId();var e=!(this.isWindowClosing&&B.isFirefox());this.recordUserEngagement(e),this.recordAppEnd(e),this.provider.sendEventsInBackground(this.isWindowClosing)},t.prototype.recordUserEngagement=function(e){M.updateIdleDuration(),this.provider.pageViewTracker.recordUserEngagement(e)},t.prototype.recordAppEnd=function(e){this.provider.configuration.isTrackAppEndEvents&&this.provider.record({name:T.PresetEvent.APP_END,isImmediate:e})},t.prototype.onBeforeUnload=function(){k.debug("onBeforeUnload"),this.isWindowClosing=!0},t.prototype.storeSession=function(){this.session.pause(),K.saveSession(this.session)},t.prototype.checkEnv=function(){if(!document||!document.addEventListener)return k.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this.hiddenStr="hidden",this.visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this.hiddenStr="msHidden",this.visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return k.debug("not in the supported web environment"),!1;this.hiddenStr="webkitHidden",this.visibilityChange="webkitvisibilitychange"}return!0},t}(L),D=new y("StorageUtil"),K=function(){function e(){}return e.getDeviceId=function(){if(""!==e.deviceId)return e.deviceId;var t=O.getItem(e.deviceIdKey);return null===t&&(t=(0,S.Z)(),O.setItem(e.deviceIdKey,t)),e.deviceId=t,t},e.setCurrentUserUniqueId=function(t){e.userUniqueId=t,O.setItem(e.userUniqueIdKey,t)},e.getCurrentUserUniqueId=function(){if(""!==e.userUniqueId)return e.userUniqueId;var t=O.getItem(e.userUniqueIdKey);return null===t&&(t=(0,S.Z)(),e.setCurrentUserUniqueId(t),O.setItem(e.userUniqueIdKey,t),e.saveUserFirstTouchTimestamp()),e.userUniqueId=t,t},e.saveUserFirstTouchTimestamp=function(){var t,r=new Date().getTime();O.setItem(e.userFirstTouchTimestampKey,String(r)),e.updateUserAttributes(((t={})[T.ReservedAttribute.USER_FIRST_TOUCH_TIMESTAMP]={value:r,set_timestamp:r},t))},e.saveUserIdMapping=function(t){O.setItem(e.userIdMappingKey,JSON.stringify(t))},e.getUserIdMapping=function(){return JSON.parse(O.getItem(e.userIdMappingKey))},e.getUserInfoFromMapping=function(t){var r,n,i,o=e.getUserIdMapping(),s=new Date().getTime();if(null===o)o={},(r={user_uniqueId:{value:e.getCurrentUserUniqueId(),set_timestamp:s}})[T.ReservedAttribute.USER_FIRST_TOUCH_TIMESTAMP]=e.getAllUserAttributes()[T.ReservedAttribute.USER_FIRST_TOUCH_TIMESTAMP],i=r;else if(t in o)i=o[t],e.setCurrentUserUniqueId(i.user_uniqueId.value.toString());else{var a=(0,S.Z)();e.setCurrentUserUniqueId(a),(n={user_uniqueId:{value:a,set_timestamp:s}})[T.ReservedAttribute.USER_FIRST_TOUCH_TIMESTAMP]={value:s,set_timestamp:s},i=n}return o[t]=i,e.saveUserIdMapping(o),i},e.getBundleSequenceId=function(){var t;return parseInt(null!==(t=O.getItem(e.bundleSequenceIdKey))&&void 0!==t?t:"1")},e.saveBundleSequenceId=function(t){O.setItem(e.bundleSequenceIdKey,String(t))},e.updateUserAttributes=function(t){O.setItem(e.userAttributesKey,JSON.stringify(t))},e.getAllUserAttributes=function(){var t;return JSON.parse(null!==(t=O.getItem(e.userAttributesKey))&&void 0!==t?t:"{}")},e.getSimpleUserAttributes=function(){var t,r=e.getAllUserAttributes(),n=((t={})[T.ReservedAttribute.USER_FIRST_TOUCH_TIMESTAMP]=r[T.ReservedAttribute.USER_FIRST_TOUCH_TIMESTAMP],t);return void 0!==r[T.ReservedAttribute.USER_ID]&&(n[T.ReservedAttribute.USER_ID]=r[T.ReservedAttribute.USER_ID]),n},e.getFailedEvents=function(){var t;return null!==(t=O.getItem(e.failedEventsKey))&&void 0!==t?t:""},e.saveFailedEvent=function(t){var r=e.MAX_FAILED_EVENTS_SIZE,n=e.getFailedEvents(),i="";(i=""===n?T.Constants.PREFIX+JSON.stringify(t):n+","+JSON.stringify(t)).length<=r?O.setItem(e.failedEventsKey,i):D.warn("Failed events reached max cache size of ".concat(r/1024,"kb"))},e.clearFailedEvents=function(){O.removeItem(e.failedEventsKey)},e.getAllEvents=function(){var t;return null!==(t=O.getItem(e.eventsKey))&&void 0!==t?t:""},e.saveEvent=function(t){var r=e.MAX_BATCH_EVENTS_SIZE,n=e.getAllEvents(),i="";return(i=""===n?T.Constants.PREFIX+JSON.stringify(t):n+","+JSON.stringify(t)).length<=r?(O.setItem(e.eventsKey,i),!0):(D.warn("Events reached max cache size of ".concat(r/1024,"kb")),!1)},e.clearEvents=function(t){if(""!==this.getAllEvents()){var r=JSON.parse(t),n=JSON.parse(this.getAllEvents()+T.Constants.SUFFIX);if(n.length>r.length){var i=JSON.stringify(n.splice(r.length));i=i.substring(0,i.length-1),O.setItem(e.eventsKey,i)}else O.removeItem(e.eventsKey)}},e.clearAllEvents=function(){O.removeItem(e.eventsKey)},e.saveSession=function(t){O.setItem(e.sessionKey,JSON.stringify(t))},e.getSession=function(){var t=O.getItem(e.sessionKey);if(null===t)return null;var r=JSON.parse(t);return new N(r.sessionId,r.sessionIndex,r.startTime,r.pauseTime)},e.getIsFirstOpen=function(){return null===O.getItem(e.isFirstOpenKey)},e.saveIsFirstOpenToFalse=function(){O.setItem(e.isFirstOpenKey,"0")},e.clearPageInfo=function(){O.setItem(e.previousPageUrlKey,""),O.setItem(e.previousPageTitleKey,"")},e.getPreviousPageUrl=function(){var t;return null!==(t=O.getItem(e.previousPageUrlKey))&&void 0!==t?t:""},e.savePreviousPageUrl=function(t){O.setItem(e.previousPageUrlKey,t)},e.getPreviousPageTitle=function(){var t;return null!==(t=O.getItem(e.previousPageTitleKey))&&void 0!==t?t:""},e.savePreviousPageTitle=function(t){O.setItem(e.previousPageTitleKey,t)},e.getPreviousPageStartTime=function(){var t=O.getItem(e.previousPageStartTimeKey);return null===t?0:Number(t)},e.savePreviousPageStartTime=function(t){O.setItem(e.previousPageStartTimeKey,t.toString())},e.checkDeviceId=function(){var t,r=null!==(t=O.getItem(e.deviceIdKey))&&void 0!==t?t:"";""!==e.deviceId&&""===r&&O.setItem(e.deviceIdKey,e.deviceId)},e.checkUserUniqueId=function(){var t,r=null!==(t=O.getItem(e.userUniqueIdKey))&&void 0!==t?t:"";""!==e.userUniqueId&&""===r&&O.setItem(e.userUniqueIdKey,e.userUniqueId)},e.checkIsFirstOpen=function(){e.getIsFirstOpen()&&e.saveIsFirstOpenToFalse()},e.checkClickstreamId=function(){e.checkDeviceId(),e.checkUserUniqueId(),e.checkIsFirstOpen()},e.clearAll=function(){O.clear(),e.deviceid="",e.userUniqueId=""},e.MAX_REQUEST_EVENTS_SIZE=524288,e.MAX_FAILED_EVENTS_SIZE=e.MAX_REQUEST_EVENTS_SIZE,e.MAX_BATCH_EVENTS_SIZE=1048576,e.prefix="aws-solution/clickstream-web/",e.deviceIdKey=e.prefix+"deviceIdKey",e.userUniqueIdKey=e.prefix+"userUniqueIdKey",e.bundleSequenceIdKey=e.prefix+"bundleSequenceIdKey",e.userAttributesKey=e.prefix+"userAttributesKey",e.userFirstTouchTimestampKey=e.prefix+"userFirstTouchTimestampKey",e.failedEventsKey=e.prefix+"failedEventsKey",e.eventsKey=e.prefix+"eventsKey",e.sessionKey=e.prefix+"sessionKey",e.isFirstOpenKey=e.prefix+"isFirstOpenKey",e.previousPageUrlKey=e.prefix+"previousPageUrlKey",e.previousPageTitleKey=e.prefix+"previousPageTitleKey",e.previousPageStartTimeKey=e.prefix+"previousPageStartTimeKey",e.userIdMappingKey=e.prefix+"userIdMappingKey",e.deviceId="",e.userUniqueId="",e}(),H=new y("BrowserInfo"),B=function(){function e(){if(e.isBrowser()){var t=window.navigator,r=t.product,n=t.vendor,i=t.userAgent,o=t.language;if(this.locale=o,this.initLocalInfo(o),this.make=r||n,this.userAgent=i,this.zoneOffset=-(6e4*new Date().getTimezoneOffset()),this.hostName=window.location.hostname,this.latestReferrer=window.document.referrer,this.latestReferrer&&""!==this.latestReferrer)try{var s=new URL(this.latestReferrer);this.latestReferrerHost=s.host}catch(e){H.warn("parse latest referrer domain failed: "+e)}}}return e.prototype.initLocalInfo=function(e){e.indexOf("-")>0?(this.system_language=e.split("-")[0],this.country_code=e.split("-")[1].toUpperCase()):(this.system_language=e,this.country_code="")},e.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},e.isFirefox=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},e.isNetworkOnLine=function(){return navigator.onLine},e.getCurrentPageUrl=function(){return e.isBrowser()?window.location.href:""},e.getCurrentPageTitle=function(){var t;return e.isBrowser()&&null!==(t=window.document.title)&&void 0!==t?t:""},e.isFromReload=function(){if(performance&&performance.getEntriesByType){var e=performance.getEntriesByType("navigation");if(e&&e.length>0)return"reload"===e[0].type&&""!==K.getPreviousPageUrl()}else H.warn("unsupported web environment for performance");return!1},e}(),x=function(){function e(){}return e.createEvent=function(e,t,r,n,i){void 0===n&&(n={});var o=e.browserInfo,s=e.configuration,a=this.getEventAttributesWithCheck(t.attributes,n);void 0!==i&&(a[T.ReservedAttribute.SESSION_ID]=i.sessionId,a[T.ReservedAttribute.SESSION_START_TIMESTAMP]=i.startTime,a[T.ReservedAttribute.SESSION_DURATION]=i.getDuration(),a[T.ReservedAttribute.SESSION_NUMBER]=i.sessionIndex),a[T.ReservedAttribute.PAGE_TITLE]=B.getCurrentPageTitle(),a[T.ReservedAttribute.PAGE_URL]=B.getCurrentPageUrl(),a[T.ReservedAttribute.LATEST_REFERRER]=o.latestReferrer,a[T.ReservedAttribute.LATEST_REFERRER_HOST]=o.latestReferrerHost;var u=this.getEventItemsWithCheck(t.items,a);return{event_type:t.name,event_id:(0,S.Z)(),device_id:K.getDeviceId(),unique_id:e.userUniqueId,app_id:s.appId,timestamp:new Date().getTime(),host_name:o.hostName,locale:o.locale,system_language:o.system_language,country_code:o.country_code,zone_offset:o.zoneOffset,make:o.make,platform:"Web",screen_height:window.screen.height,screen_width:window.screen.width,viewport_height:window.innerHeight,viewport_width:window.innerWidth,sdk_name:"aws-solution-clickstream-sdk",sdk_version:"0.12.5",items:u,user:null!=r?r:{},attributes:a}},e.getEventAttributesWithCheck=function(e,t){void 0===t&&(t={});var r={},n=A.checkAttributes,i=Object.keys(t).length;for(var o in e){var s=e[o];if(null!==s){var a=n(Object.keys(r).length+i,o,s),u=T.ReservedAttribute,c=u.ERROR_CODE,l=u.ERROR_MESSAGE;a.error_code>0?(r[c]=a.error_code,r[l]=a.error_message):r[o]=s}}return Object.assign(r,t)},e.getEventItemsWithCheck=function(e,t){var r,n,i=void 0;if(void 0!==e){i=[];var o=A.checkItems;try{for(var s=(0,m.__values)(e),a=s.next();!a.done;a=s.next()){var u=a.value,c=o(i.length,u),l=T.ReservedAttribute,d=l.ERROR_CODE,f=l.ERROR_MESSAGE;c.error_code>0&&(t[d]=c.error_code,t[f]=c.error_message),c.error_code===T.ErrorCode.NO_ERROR&&i.push(u)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}return i},e}(),G=function(e,t){this.browserInfo=e,this.configuration=t,this.userUniqueId=K.getCurrentUserUniqueId()},V=r(44505),j=r(85279),X=function(){function e(){}return e.getHashCode=function(e){return(0,m.__awaiter)(this,void 0,void 0,function(){var t,r;return(0,m.__generator)(this,function(n){switch(n.label){case 0:return(t=new j.Sha256).update(e),[4,t.digest()];case 1:return r=n.sent(),[2,this.uint8ArrayToHexString(r).substring(0,8)]}})})},e.uint8ArrayToHexString=function(e){return Array.from(e,function(e){return e.toString(16).padStart(2,"0")}).join("")},e}(),W=new y("NetRequest"),q=function(){function e(){}return e.sendRequest=function(t,r,n,i,o){var s,a,u,c;return void 0===i&&(i=e.REQUEST_RETRY_TIMES),void 0===o&&(o=e.REQUEST_TIMEOUT),(0,m.__awaiter)(this,void 0,void 0,function(){var l,d,f,h,_,p,E,g,v,y,S,T;return(0,m.__generator)(this,function(m){switch(m.label){case 0:return l=r.configuration,d=r.browserInfo,[4,X.getHashCode(t)];case 1:f=m.sent(),h=new URLSearchParams({platform:"Web",appId:l.appId,event_bundle_sequence_id:n.toString(),upload_timestamp:new Date().getTime().toString(),hashCode:f}),_="".concat(l.endpoint,"?").concat(h.toString()),p=new AbortController,E=setTimeout(function(){p.abort()},o),g=new Blob([t]).size<e.KEEP_ALIVE_SIZE_LIMIT,(v={method:"POST",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8",cookie:null!==(a=null===(s=l.authCookie)||void 0===s?void 0:s.toString())&&void 0!==a?a:"","User-Agent":null!==(c=null===(u=d.userAgent)||void 0===u?void 0:u.toString())&&void 0!==c?c:""},credentials:"include",body:t,keepalive:g}).signal=p.signal,y=0,m.label=2;case 2:if(!(y<i))return[3,8];m.label=3;case 3:return m.trys.push([3,5,6,7]),[4,fetch(_,v)];case 4:if((S=m.sent()).ok&&200===S.status)return[2,!0];return W.error("Request failed with status code ".concat(S.status)),[3,7];case 5:return T=m.sent(),W.error("Error during request: ".concat(T)),[3,7];case 6:return clearTimeout(E),y++,[7];case 7:return[3,2];case 8:return W.error("Request failed after ".concat(i," retries")),[2,!1]}})})},e.REQUEST_TIMEOUT=1e4,e.BATCH_REQUEST_TIMEOUT=15e3,e.REQUEST_RETRY_TIMES=3,e.BATCH_REQUEST_RETRY_TIMES=1,e.KEEP_ALIVE_SIZE_LIMIT=65536,e}(),Z=new y("EventRecorder"),Y=function(){function e(e){this.context=e,this.bundleSequenceId=K.getBundleSequenceId()}return e.prototype.record=function(e,t){void 0===t&&(t=!1),this.context.configuration.isLogEvents&&(Z.level=V.kK.DEBUG,Z.debug("Logged event ".concat(e.event_type,"\n"),e)),this.context.configuration.sendMode===i.Immediate||t?this.sendEventImmediate(e):K.saveEvent(e)||this.sendEventImmediate(e)},e.prototype.sendEventImmediate=function(e){var t=this,r=JSON.stringify([e]);q.sendRequest(r,this.context,this.bundleSequenceId).then(function(r){r?(Z.debug("Event send success"),t.haveFailedEvents&&t.sendFailedEvents()):(K.saveFailedEvent(e),t.haveFailedEvents=!0)}),this.plusSequenceId()},e.prototype.sendFailedEvents=function(){var e=this;if(!this.isSendingFailedEvents){this.isSendingFailedEvents=!0;var t=K.getFailedEvents();if(t.length>0){var r=t+T.Constants.SUFFIX;q.sendRequest(r,this.context,this.bundleSequenceId).then(function(t){t&&(Z.debug("Failed events send success"),K.clearFailedEvents(),e.haveFailedEvents=!1),e.isSendingFailedEvents=!1}),this.plusSequenceId()}}},e.prototype.flushEvents=function(){var e=this;if(!this.isFlushingEvents){var t=(0,m.__read)(this.getBatchEvents(),2),r=t[0],n=t[1];""!==r&&(this.isFlushingEvents=!0,q.sendRequest(r,this.context,this.bundleSequenceId,q.BATCH_REQUEST_RETRY_TIMES,q.BATCH_REQUEST_TIMEOUT).then(function(t){t&&K.clearEvents(r),e.isFlushingEvents=!1,t&&n&&e.flushEvents()}),this.plusSequenceId())}},e.prototype.getBatchEvents=function(){var e=K.getAllEvents();if(""===e)return[e,!1];if(e.length<=K.MAX_REQUEST_EVENTS_SIZE)return[e+T.Constants.SUFFIX,!1];var t=0>e.lastIndexOf(T.Constants.LAST_EVENT_IDENTIFIER),r=e.indexOf(T.Constants.LAST_EVENT_IDENTIFIER);if(t)return[e+T.Constants.SUFFIX,!1];if(r>K.MAX_REQUEST_EVENTS_SIZE)return[(e=e.substring(0,r+1))+T.Constants.SUFFIX,!0];var n=(e=e.substring(0,K.MAX_REQUEST_EVENTS_SIZE)).lastIndexOf(T.Constants.LAST_EVENT_IDENTIFIER);return[e.substring(0,n+1)+T.Constants.SUFFIX,!0]},e.prototype.plusSequenceId=function(){this.bundleSequenceId+=1,K.saveBundleSequenceId(this.bundleSequenceId)},e.prototype.sendEventsInBackground=function(e){if(this.haveFailedEvents&&this.getFailedEventsLength()<q.KEEP_ALIVE_SIZE_LIMIT&&(this.sendFailedEvents(),e&&K.clearFailedEvents()),this.context.configuration.sendMode===i.Batch){var t=this.getEventsLength();t>0&&t<q.KEEP_ALIVE_SIZE_LIMIT&&(this.flushEvents(),e&&K.clearAllEvents())}},e.prototype.getFailedEventsLength=function(){return new Blob([K.getFailedEvents()]).size},e.prototype.getEventsLength=function(){return new Blob([K.getAllEvents()]).size},e}(),z=new y("ClickTracker"),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.processedElements=new WeakSet,t}return(0,m.__extends)(t,e),t.prototype.init=function(){this.trackClick=this.trackClick.bind(this),this.trackDocumentClick=this.trackDocumentClick.bind(this),document.addEventListener("click",this.trackDocumentClick);var e=window.location.host,t=this.context.configuration.domainList;t.includes(e)||t.push(e),this.addClickListenerForATag()},t.prototype.trackDocumentClick=function(e){if(M.updateIdleDuration(),this.context.configuration.isTrackClickEvents){var t=e.target,r=this.findATag(t);!r||this.processedElements.has(r)||this.trackClick(e,r)}},t.prototype.trackClick=function(e,t){if(void 0===t&&(t=void 0),this.context.configuration.isTrackClickEvents){var r,n=t;if(!n){var i=e.target;n=this.findATag(i)}if(null!==n){var o=n.getAttribute("href");if(null===o||0===o.length)return;var s="";try{s=new URL(o).host}catch(e){z.debug("parse link domain failed: "+e)}if(""===s)return;var a=n.getAttribute("class"),u=n.getAttribute("id"),c=!this.context.configuration.domainList.includes(s);this.provider.record({name:T.PresetEvent.CLICK,attributes:((r={})[T.ReservedAttribute.LINK_URL]=o,r[T.ReservedAttribute.LINK_DOMAIN]=s,r[T.ReservedAttribute.LINK_CLASSES]=a,r[T.ReservedAttribute.LINK_ID]=u,r[T.ReservedAttribute.OUTBOUND]=c,r)})}}},t.prototype.addClickListenerForATag=function(){var e=this;new MutationObserver(function(t){var r,n;try{for(var i=(0,m.__values)(t),o=i.next();!o.done;o=i.next()){var s=o.value;!function(t){if("childList"===t.type&&t.addedNodes.length>0){var r=t.target;if(r instanceof Element){var n=r.querySelectorAll("a");n.forEach(function(t){e.processedElements.has(n)||(t.addEventListener("click",e.trackClick),e.processedElements.add(t))})}}}(s)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}).observe(document.documentElement,{childList:!0,subtree:!0})},t.prototype.findATag=function(e,t){return(void 0===t&&(t=0),e&&t<3)?"A"===e.tagName?e:(t+=1,this.findATag(e.parentElement,t)):null},t}(L),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,m.__extends)(t,e),t.prototype.init=function(){var e=this;this.trackPageLoad=this.trackPageLoad.bind(this),this.isSupportedEnv()&&(this.observer=new PerformanceObserver(function(){e.trackPageLoad()}),this.observer.observe({entryTypes:["navigation"]})),this.isPageLoaded()&&this.trackPageLoad()},t.prototype.trackPageLoad=function(){if(this.context.configuration.isTrackPageLoadEvents){var e=performance.getEntriesByType("navigation");if(e&&e.length>0){var t=e[e.length-1],r={};for(var n in t){var i=t[n],o=typeof i;T.ReservedAttribute.TIMING_ATTRIBUTES.includes(n)&&("string"===o||"number"===o?r[n]=i:Array.isArray(i)&&i.length>0&&(r[n]=JSON.stringify(i)))}this.provider.record({name:T.PresetEvent.PAGE_LOAD,attributes:r})}}},t.prototype.isPageLoaded=function(){var e,t=performance.getEntriesByType("navigation");return(null===(e=null==t?void 0:t[0])||void 0===e?void 0:e.duration)>0},t.prototype.isSupportedEnv=function(){return!!performance&&!!PerformanceObserver},t}(L),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,m.__extends)(t,e),t.prototype.init=function(){this.trackScroll=this.trackScroll.bind(this);var e=this.throttle(this.trackScroll,100);document.addEventListener("scroll",e,{passive:!0});var t=this.throttle(this.onMouseMove,100);document.addEventListener("mousemove",t,{passive:!0}),this.isFirstTime=!0},t.prototype.enterNewPage=function(){this.isFirstTime=!0},t.prototype.trackScroll=function(){if(M.updateIdleDuration(),this.context.configuration.isTrackScrollEvents){var e,t=window.scrollY||document.documentElement.scrollTop,r=.9*document.body.scrollHeight,n=t+window.innerHeight;if(t>0&&n>r&&this.isFirstTime){var i=new Date().getTime()-K.getPreviousPageStartTime();this.provider.record({name:T.PresetEvent.SCROLL,attributes:((e={})[T.ReservedAttribute.ENGAGEMENT_TIMESTAMP]=i,e)}),this.isFirstTime=!1}}},t.prototype.onMouseMove=function(){M.updateIdleDuration()},t.prototype.throttle=function(e,t){var r=null;return function(){for(var n=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];r||(r=setTimeout(function(){e.apply(n,i),r=null},t))}},t}(L),ee=new y("ClickstreamProvider"),et=function(){function e(){this.configuration={appId:"",endpoint:"",sendMode:i.Immediate,sendEventsInterval:5e3,isTrackPageViewEvents:!0,isTrackUserEngagementEvents:!0,isTrackClickEvents:!0,isTrackSearchEvents:!0,isTrackScrollEvents:!0,isTrackPageLoadEvents:!1,isTrackAppStartEvents:!1,isTrackAppEndEvents:!1,pageType:o.SPA,isLogEvents:!1,sessionTimeoutDuration:18e5,idleTimeoutDuration:12e4,searchKeyWords:[],domainList:[],globalAttributes:{}}}return e.prototype.configure=function(e){return""===e.appId||""===e.endpoint?(ee.error("Please configure your appId and endpoint"),e):(Object.assign(this.configuration,e),this.context=new G(new B,this.configuration),this.eventRecorder=new Y(this.context),this.globalAttributes={},this.setGlobalAttributes(e.globalAttributes),this.userAttributes=K.getSimpleUserAttributes(),this.sessionTracker=new F(this,this.context),this.pageViewTracker=new M(this,this.context),this.clickTracker=new J(this,this.context),this.scrollTracker=new $(this,this.context),this.pageLoadTracker=new Q(this,this.context),this.sessionTracker.setUp(),this.pageViewTracker.setUp(),this.clickTracker.setUp(),this.scrollTracker.setUp(),this.pageLoadTracker.setUp(),e.sendMode===i.Batch&&this.startTimer(),this.context.configuration.isLogEvents&&(ee.level=V.kK.DEBUG),ee.debug("Initialize the SDK successfully, configuration is:\n"+JSON.stringify(this.configuration)),this.eventRecorder.getFailedEventsLength()>0&&(this.eventRecorder.haveFailedEvents=!0,this.eventRecorder.sendFailedEvents()),this.configuration)},e.prototype.updateConfigure=function(e){Object.assign(this.configuration,e)},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"ClickstreamProvider"},e.prototype.record=function(e){var t=A.checkEventName(e.name);if(t.error_code>0){ee.error(t.error_message),this.recordClickstreamError(t);return}var r=this.createEvent(e);this.recordEvent(r,e.isImmediate)},e.prototype.createEvent=function(e,t){return void 0===t&&(t=null),x.createEvent(this.context,e,null===t?this.userAttributes:t,this.globalAttributes,this.sessionTracker.session)},e.prototype.recordEvent=function(e,t){void 0===t&&(t=!1),this.eventRecorder.record(e,t)},e.prototype.setUserId=function(e){var t="";if(T.ReservedAttribute.USER_ID in this.userAttributes&&(t=this.userAttributes[T.ReservedAttribute.USER_ID].value.toString()),null===e)delete this.userAttributes[T.ReservedAttribute.USER_ID];else if(e!==t){var r=K.getUserInfoFromMapping(e),n={};n[T.ReservedAttribute.USER_ID]={value:e,set_timestamp:new Date().getTime()},n[T.ReservedAttribute.USER_FIRST_TOUCH_TIMESTAMP]=r[T.ReservedAttribute.USER_FIRST_TOUCH_TIMESTAMP],K.updateUserAttributes(n),this.userAttributes=n,this.context.userUniqueId=K.getCurrentUserUniqueId()}this.recordProfileSet(this.userAttributes),K.updateUserAttributes(this.userAttributes)},e.prototype.setUserAttributes=function(e){var t=new Date().getTime(),r=K.getAllUserAttributes();for(var n in e){var i=e[n];if(null===i)delete r[n];else{var o=Object.keys(r).length,s=(0,A.checkUserAttribute)(o,n,i);s.error_code>0?this.recordClickstreamError(s):r[n]={value:i,set_timestamp:t}}}K.updateUserAttributes(r),this.recordProfileSet(r)},e.prototype.setGlobalAttributes=function(e){for(var t in e){var r=e[t];if(null===r)delete this.globalAttributes[t];else{var n=Object.keys(this.globalAttributes).length,i=(0,A.checkAttributes)(n,t,r);i.error_code>0?this.recordClickstreamError(i):this.globalAttributes[t]=r}}},e.prototype.recordClickstreamError=function(e){var t,r=T.ReservedAttribute,n=r.ERROR_CODE,i=r.ERROR_MESSAGE,o=this.createEvent({name:T.PresetEvent.CLICKSTREAM_ERROR,attributes:((t={})[n]=e.error_code,t[i]=e.error_message,t)});this.recordEvent(o)},e.prototype.recordProfileSet=function(e){var t=this.createEvent({name:T.PresetEvent.PROFILE_SET},e);this.recordEvent(t)},e.prototype.startTimer=function(){setInterval(this.flushEvents.bind(this,this.eventRecorder),this.configuration.sendEventsInterval)},e.prototype.flushEvents=function(e){e.flushEvents()},e.prototype.sendEventsInBackground=function(e){!(B.isFirefox()&&e)&&B.isNetworkOnLine()&&this.eventRecorder.sendEventsInBackground(e)},e}(),er=function(){function e(){}return e.init=function(e){return void 0!==this.provider?(this.logger.warn("Clickstream SDK has initialized"),!1):(this.provider=new et,this.provider.configure(e),!0)},e.record=function(e){this.provider.record(e)},e.setUserId=function(e){this.provider.setUserId(e)},e.setUserAttributes=function(e){this.provider.setUserAttributes(e)},e.updateConfigure=function(e){this.provider.updateConfigure(e)},e.setGlobalAttributes=function(e){this.provider.setGlobalAttributes(e)},e.logger=new y("ClickstreamAnalytics"),e}()},39732:function(e,t,r){r.r(t),r.d(t,{__assign:function(){return o},__asyncDelegator:function(){return m},__asyncGenerator:function(){return y},__asyncValues:function(){return S},__await:function(){return v},__awaiter:function(){return l},__classPrivateFieldGet:function(){return b},__classPrivateFieldSet:function(){return R},__createBinding:function(){return f},__decorate:function(){return a},__exportStar:function(){return h},__extends:function(){return i},__generator:function(){return d},__importDefault:function(){return A},__importStar:function(){return I},__makeTemplateObject:function(){return T},__metadata:function(){return c},__param:function(){return u},__read:function(){return p},__rest:function(){return s},__spread:function(){return E},__spreadArrays:function(){return g},__values:function(){return _}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function a(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function u(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})}function d(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function h(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function _(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function E(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function g(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function y(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||a(e,t)})})}function a(e,t){try{var r;(r=i[e](t)).value instanceof v?Promise.resolve(r.value.v).then(u,c):l(o[0][2],r)}catch(e){l(o[0][3],e)}}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function m(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:v(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function S(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=_(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function R(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}}}]);