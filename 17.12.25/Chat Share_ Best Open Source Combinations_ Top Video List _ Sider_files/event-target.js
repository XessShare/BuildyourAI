const root="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global,shouldPolyfillEvent=function(){try{new root.Event("")}catch(e){return!0}return!1}(),shouldPolyfillEventTarget=function(){try{new root.EventTarget}catch(e){return!0}return!1}();shouldPolyfillEvent&&(root.Event=function(e,t){this.bubbles=!!t&&!!t.bubbles,this.cancelable=!!t&&!!t.cancelable,this.composed=!!t&&!!t.composed,this.type=e}),shouldPolyfillEventTarget&&(root.EventTarget=function(){function e(){this.__listeners=new Map}return(e.prototype=Object.create(Object.prototype)).addEventListener=function(e,t,n){if(arguments.length<2)throw new TypeError("TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only "+arguments.length+" present.");const o=this.__listeners;var r=e.toString();o.has(r)||o.set(r,new Map);const s=o.get(r);s.has(t)||s.set(t,n)},e.prototype.removeEventListener=function(e,t,n){if(arguments.length<2)throw new TypeError("TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only "+arguments.length+" present.");const o=this.__listeners;var r=e.toString();if(o.has(r)){const s=o.get(r);s.has(t)&&s.delete(t)}},e.prototype.dispatchEvent=function(n){if(!(n instanceof Event))throw new TypeError("Failed to execute 'dispatchEvent' on 'EventTarget': parameter 1 is not of type 'Event'.");var e=n.type;const t=this.__listeners,o=t.get(e);return o&&o.entries().forEach(e=>{const t=e[0];e=e[1];try{"function"==typeof t?t.call(this,n):t&&"function"==typeof t.handleEvent&&t.handleEvent(n)}catch(e){setTimeout(()=>{throw e})}e&&e.once&&o.delete(t)}),!0},e}());